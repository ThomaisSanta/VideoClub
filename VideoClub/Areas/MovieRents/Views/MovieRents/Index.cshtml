@model IEnumerable<VideoClub.Areas.MovieRents.Data.MovieRentViewModel>


@{
    ViewBag.Title = "ActiveBookings";
}

@*<script src="~/Areas/MovieRents/Views/MovieRents/DeletePopUp.js"></script>*@


<h2>Active Bookings</h2>
<p>Here you can view all the active bookings of the video club</p>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Title)
        </th>
        <th>

            @Html.DisplayNameFor(model => model.CopyID)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.UserName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ReturnDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Comment)
        </th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Title)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CopyID)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.UserName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ReturnDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Comment)
            </td>
            <td>
                @*@Html.ActionLink("Delete", "Delete", new { copyID = item.CopyID })*@
                <input type="button" id="btnDelete" value="Delete" />
            </td>
        </tr>
    }
</table>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
<script type="text/javascript">
    $("body").on("click", "#btnDelete", function () {
        if (confirm("Do you want to delete this movie rent?")) {
            var copyID = {};
            //copyID = $("#txtCopyID").val();
            $.ajax({
                type: "POST",
                url: "MovieRents/Controllers/DeleteMovieRent", 
                data: JSON.stringify(copyID),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(copyID) {
                    if (copyID != null) {
                        alert("Deleted movie rent with copy ID " + copyID);
                    } else {
                        alert("Movie rent with this copy ID not found.");
                    }
                }
            });
        }
    });
</script>



@*@Html.ActionLink("Back to admin page", "Index", "Admin", new { area = "" })*@
<a href="@Url.Action("Index", "Admin", new { area = ""})">Back to admin page</a>



